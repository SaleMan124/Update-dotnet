# Update .NET SDK PowerShell Script for GitHub Actions

This repository contains a PowerShell script that can be used to automate
updates to the .NET SDK version specified in a `global.json` file.

Coupled with GitHub Actions, it can be used in a workflow triggered on a
schedule to keep the version of the .NET SDK your repository is configured to
use up-to-date.

## Example

This repository itself serves as an example for using the script with GitHub
Actions, with the script used to keep a `global.json` file up-to-date for the
purposes of testing the [`update-dotnet-sdk.ps1`](https://github.com/martincostello/Update-DotNet-Core-SDK/blob/master/update-dotnet-sdk.ps1) script itself from the
 [`.github/workflows/update-dotnet-sdk.yml`](https://github.com/martincostello/Update-DotNet-Core-SDK/blob/master/.github/workflows/update-dotnet-sdk.yml) workflow.

In its simplest form, the script can be used from a GitHub Actions YAML like this to keep the SDK up-to-date with the latest .NET Core 3.1 SDK by checking for changes every hour:

```YAML
name: update-dotnet-sdk
on:
  schedule:
    - cron:  '0 * * * *'
jobs:
  build:
    name: Update .NET SDK
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Update .NET SDK
      shell: pwsh
      run: ./update-dotnet-sdk.ps1 -GitHubToken ${{ secrets.GITHUB_TOKEN }}
```

The scheduling is controlled independently of the script, so you can customise the frequency of
updates to whatever you feel is appropriate for your own repositories.

Here's an example of a real pull request generated by the script from an action: [martincostello/Pseudolocalizer#58](https://github.com/martincostello/Pseudolocalizer/pull/58)

## Usage

Further documentation of the script and its arguments are included [within the script itself](https://github.com/martincostello/Update-DotNet-Core-SDK/blob/master/update-dotnet-sdk.ps1).

Features include:
  * Specifying the .NET channel (2.1, 3.1, 5.0, etc.) to update the SDK for.
  * The Git user and email used for update commits.
  * The path of the `global.json` file.

You can also run the script locally without any arguments (or just the `-Channel` argument) to update the SDK on a local branch, without pushing the change to your remote or creating a Pull Request.

## Feedback

Any feedback or issues can be added to the issues for this project in [GitHub](https://github.com/martincostello/Update-DotNet-Core-SDK/issues "Issues for this project on GitHub.com").

## Repository

The repository is hosted in [GitHub](https://github.com/martincostello/Update-DotNet-Core-SDK "This project on GitHub.com"): https://github.com/martincostello/Update-DotNet-Core-SDK.git

## License

This project is licensed under the [Apache 2.0](https://github.com/martincostello/Update-DotNet-Core-SDK/blob/master/LICENSE "The Apache 2.0 license") license.
